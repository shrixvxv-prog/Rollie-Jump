<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino-Replacement Game</title>
    <style>
        body {
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Press Start 2P', cursive;
            text-align: center;
        }

        @font-face {
            font-family: 'Press Start 2P';
            src: url('https://fonts.gstatic.com/s/pressstart2p/v14/87lSwU4iYh7gKjAYJ9GAQ78y.woff2') format('woff2');
        }

        #game-container {
            position: relative;
            border: 5px solid #333;
            border-radius: 10px;
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        h1 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }

        #score-container {
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 18px;
            color: #555;
            z-index: 10;
        }

        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, #d6d6d6 0%, #e0e0e0 100%);
            border-bottom: 2px solid #333;
        }

        #instructions {
            margin-top: 15px;
            font-size: 14px;
            color: #888;
        }

        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            flex-direction: column;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }

        #game-over span {
            font-size: 32px;
            font-weight: bold;
            color: #d9534f;
            margin-bottom: 15px;
        }

        #restart-btn {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: 2px solid #5cb85c;
            background-color: #5cb85c;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s, transform 0.1s;
        }

        #restart-btn:hover {
            background-color: #4cae4c;
            border-color: #4cae4c;
            transform: translateY(-2px);
        }

    </style>
</head>
<body>

    <div id="game-container">
        <h1>Rollie-Jump Game</h1>
        <div id="score-container">Score: <span id="score">0</span></div>
        <canvas id="gameCanvas" width="800" height="250"></canvas>
        <div id="instructions">Press Space or Tap to Jump</div>
        <div id="game-over">
            <span>Game Over!</span>
            <button id="restart-btn">Restart Game</button>
        </div>
    </div>
<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Game UI elements
    const scoreEl = document.getElementById('score');
    const instructionsEl = document.getElementById('instructions');
    const gameOverEl = document.getElementById('game-over');
    const restartBtn = document.getElementById('restart-btn');

    // Game variables
    let score = 0;
    let gameSpeed = 5;
    let isGameOver = false;
    let obstacles = [];
    let frame = 0;

    // Player properties
    const player = {
        x: 50,
        y: canvas.height - 60,
        width: 60,
        height: 60,
        velocityY: 0,
        gravity: 0.8,
        jumpPower: -15,
        isJumping: false,
        image: new Image()
    };

    // Load player image using a relative path
    // Make sure 'Rollieeee.jpg' is in the same folder as your HTML file!
    player.image.src = 'Rollieeee.jpg';

    player.image.onerror = () => {
        // This runs if the image fails to load, showing the blue box.
        // Check your console (F12) for errors if you still see the box.
        console.error("Failed to load player image. Make sure the image file is in the same folder as the HTML file and the filename is correct.");
    };


    // Obstacle properties
    class Obstacle {
        constructor(x, y, width, height) {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
            this.passed = false; // Flag to check if the obstacle has been passed
        }

        draw() {
            ctx.fillStyle = '#555'; // Obstacle color
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }

        update() {
            this.x -= gameSpeed;
            this.draw();
        }
    }

    function spawnObstacle() {
        const height = Math.random() * (60 - 20) + 20; // Random height
        const width = 20;
        const obstacle = new Obstacle(canvas.width, canvas.height - height, width, height);
        obstacles.push(obstacle);
    }

    function handleJump(e) {
        if (!player.isJumping && !isGameOver) {
            // Check for space bar or touch start
            if (e.code === 'Space' || e.type === 'touchstart' || e.type === 'mousedown') {
                player.velocityY = player.jumpPower;
                player.isJumping = true;
                instructionsEl.style.display = 'none'; // Hide instructions on first jump
            }
        }
    }

    function updateScore() {
        score++;
        scoreEl.textContent = score;
        if (score > 0 && score % 100 === 0) {
            gameSpeed += 0.5; // Increase speed every 100 points
        }
    }

    function detectCollision(a, b) {
        return a.x < b.x + b.width &&
                a.x + a.width > b.x &&
                a.y < b.y + b.height &&
                a.y + a.height > b.y;
    }

    function resetGame() {
        score = 0;
        gameSpeed = 5;
        obstacles = [];
        frame = 0;
        player.y = canvas.height - player.height;
        player.velocityY = 0;
        player.isJumping = false;
        isGameOver = false;
        
        scoreEl.textContent = score;
        gameOverEl.style.display = 'none';
        instructionsEl.style.display = 'block';

        requestAnimationFrame(gameLoop);
    }
    
    function gameOver() {
        isGameOver = true;
        gameOverEl.style.display = 'flex';
    }


    function gameLoop() {
        if (isGameOver) {
            return;
        }
        
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Update and draw player
        player.velocityY += player.gravity;
        player.y += player.velocityY;

        // Prevent player from falling through the ground
        if (player.y > canvas.height - player.height) {
            player.y = canvas.height - player.height;
            player.velocityY = 0;
            player.isJumping = false;
        }
        
        // Draw the player image
        if (player.image.complete && player.image.naturalHeight !== 0) {
             ctx.drawImage(player.image, player.x, player.y, player.width, player.height);
        } else {
             // Fallback rectangle if image is not loaded
             ctx.fillStyle = 'blue';
             ctx.fillRect(player.x, player.y, player.width, player.height);
        }


        // Spawn and update obstacles
        // The spawn rate is tied to game speed to become more challenging
        const spawnRate = Math.max(50, 120 - Math.floor(gameSpeed * 5));
        if (frame % spawnRate === 0) {
            spawnObstacle();
        }

        for (let i = obstacles.length - 1; i >= 0; i--) {
            const obs = obstacles[i];
            obs.update();

            // Collision detection
            if (detectCollision(player, obs)) {
                gameOver();
                return; // Stop the loop immediately on game over
            }

            // Check if the obstacle is past the player and update score
            // This is the new, corrected logic
            if (!obs.passed && obs.x + obs.width < player.x) {
                updateScore();
                obs.passed = true; // Mark as passed to prevent multiple score updates
            }

            // Remove obstacles that are off-screen
            if (obs.x + obs.width < 0) {
                obstacles.splice(i, 1);
            }
        }

        frame++;
        requestAnimationFrame(gameLoop);
    }

    // Event Listeners
    document.addEventListener('keydown', handleJump);
    canvas.addEventListener('touchstart', handleJump);
    canvas.addEventListener('mousedown', handleJump);
    restartBtn.addEventListener('click', resetGame);

    // Initial draw to show the character before starting
    player.image.onload = () => {
       ctx.drawImage(player.image, player.x, player.y, player.width, player.height);
    };
    
    // Start game
    gameLoop();
</script>

</body>
</html>
